{"mappings":"AAAA,SAAS,iBAAiB,oBAAoB;AAE9C,eAAe;IACX,MAAM,mBAAmB,SAAS,cAAc;IAChD,MAAM,cAAc,SAAS,cAAc;IAC3C,MAAM,eAAe,SAAS,cAAc;IAC5C,MAAM,cAAc,SAAS,cAAc;IAC3C,MAAM,YAAY,SAAS,cAAc;IAEzC,aAAa;IACb,IAAI,QAAQ,MAAM;IAClB,WAAW;IACX;IACA,eAAe,SAAS,eAAe,EAAE;QACrC,eAAe,OAAO,iBAAiB;QACvC,IAAI,QAAQ,EAAE;QACd,IAAI;YACA,MAAM,WAAW,MAAM,MACnB,CAAC,kDAAkD,EAAE,aAAa,CAAC;YAEvE,QAAQ,MAAM,SAAS;QAC3B,EAAE,OAAO,GAAG;YACR,QAAQ,IAAI;QAChB,SAAU,CACV;QACA,OAAO;IACX;IACA,SAAS,WAAW,KAAK;QACrB,aAAa;QACb,UAAU,YAAY;QACtB,IAAI,CAAC,MAAM,QACP,kBAAkB;QAEtB,MAAM,QAAQ,CAAC,IAAI;YACf,UAAU,YAAY,kBAAkB,KAAK,IAAI;QACrD;IACJ;IACA,SAAS;QACL,YAAY,iBAAiB,SAAS;QACtC,iBAAiB,iBAAiB,UAAU;IAChD;IAEA,SAAS,cAAc,KAAK;QACxB,OAAQ,MAAM;YACV,KAAK;gBACD,WAAW;oBACP,WAAW;gBACf,GAAE;gBACN;YAEA,KAAK;gBACD,IAAG,CAAC,MAAM,OAAO,OACb,WAAW;gBAEnB;QACJ;IACJ;IAEA,eAAe;QACX,QAAQ,MAAM,SAAS,OAAO,iBAAiB;QAC/C,WAAW;QACX,WAAW;IACf;IACA,SAAS,WAAW,KAAK;QACrB,MAAM,gBAAgB,YAAY,MAAM,cAAc;QACtD,aAAa,YAAY;QACzB,aAAa;QACb,MAAM,eAAe,gBACf,MAAM,OAAO,CAAC,EAAE,KAAK,EAAE,GAAK,MAAM,cAAc,OAAO,SAAS,kBAChE;QACN,WAAW;YACP,WAAW;QACf,GAAE;IACN;IACA,SAAS,kBAAkB,GAAG,EAAE,KAAK;QACjC,MAAM,OAAO,SAAS,cAAc;QACpC,KAAK,UAAU,IAAI,mBAAmB,aAAa,QAAQ;QAC3D,KAAK,cAAc,CAAC,EAAE,MAAM,EAAE,GAAG,EAAE,MAAM,CAAC;QAC1C,OAAO;IACX;IACA,SAAS,kBAAmB,UAAU,EAAE;QACpC,aAAa,YAAY;IAC7B;IACA,SAAS,aAAc,QAAQ,KAAK;QAChC,IAAI,OAAO;YACP,YAAY,UAAU,OAAO;YAC7B,UAAU,UAAU,IAAI;QAC5B,OAAO;YACH,YAAY,UAAU,IAAI;YAC1B,UAAU,UAAU,OAAO;QAC/B;IACJ;AACJ","sources":["src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', init);\n\nasync function init(){\n    const countOfPostsList = document.querySelector('#countOfPosts');\n    const searchInput = document.querySelector('#search');\n    const searchStatus = document.querySelector(\".search_status\");\n    const progressBar = document.querySelector(\".progress\");\n    const postsList = document.querySelector(\"#posts\");\n\n    showProgress(true);\n    let posts = await getPosts();\n    renderPost(posts);\n    attachEvents();\n    async function getPosts(countOfPosts = 10){\n        countOfPosts = Number(countOfPostsList.value);\n        let posts = [];\n        try {\n            const response = await fetch(\n                `https://jsonplaceholder.typicode.com/posts?_limit=${countOfPosts}`\n            );\n            posts = await response.json();\n        } catch (e) {\n            console.log('Error');\n        } finally {\n        }\n        return posts;\n    }\n    function renderPost(posts) {\n        showProgress(false);\n        postsList.innerHTML = null;\n        if (!posts.length) {\n            searchResultEmpty('Совпадений не найдено!');\n        }\n        posts.forEach((el, idx) => {\n            postsList.appendChild(createPostElement(idx, el?.title));\n        });\n    }\n    function attachEvents(){\n        searchInput.addEventListener('keyup', startSearcher);\n        countOfPostsList.addEventListener('change', reload);\n    }\n\n    function startSearcher(event) {\n        switch (event.key) {\n            case \"Enter\" :\n                setTimeout(()=>{\n                    searchPost(posts);\n                },500)\n            break;\n\n            case \"Backspace\" :\n                if(!event.target.value) {\n                    renderPost(posts);\n                }\n            break;\n        }\n    }\n\n    async function reload() {\n        posts = await getPosts(Number(countOfPostsList.value));\n        renderPost(posts);\n        searchPost(posts);\n    }\n    function searchPost(posts) {\n        const searchRequest = searchInput.value.toLowerCase().trim();\n        searchStatus.innerHTML = null;\n        showProgress(true);\n        const searchResult = searchRequest\n            ? posts.filter(({ title }) => title.toLowerCase().trim().includes(searchRequest))\n            : posts;\n        setTimeout(()=> {\n            renderPost(searchResult);\n        },500);\n    }\n    function createPostElement(idx, title) {\n        const post = document.createElement('li');\n        post.classList.add('collection-item', 'hoverable', 'blue', 'lighten-5');\n        post.textContent = `${idx + 1} - ${title}`;\n        return post;\n    }\n    function searchResultEmpty (message = '') {\n        searchStatus.innerHTML = message;\n    }\n    function showProgress (state = false) {\n        if (state) {\n            progressBar.classList.remove(\"hide\");\n            postsList.classList.add(\"hide\");\n        } else {\n            progressBar.classList.add('hide');\n            postsList.classList.remove('hide');\n        }\n    }\n}"],"names":[],"version":3,"file":"index.de158e3a.js.map","sourceRoot":"/__parcel_source_root/"}