{"mappings":"AAAA,SAAS,iBAAiB,oBAAoB;AAE9C,eAAe;IACX,MAAM,SAAS,SAAS,cAAc;IACtC,IAAI,sBAAuB,OAAO,OAAO;IACzC,MAAM,cAAc,SAAS,cAAc;IAC3C,MAAM,eAAe,SAAS,cAAc;IAC5C,MAAM,cAAc,SAAS,cAAc;IAC3C,MAAM,YAAY,SAAS,cAAc;IAGzC,aAAa;IACb,IAAI,QAAQ,MAAM,SAAS;IAC3B,WAAW;IACX;IACA,eAAe,SAAS,eAAe,EAAE;QACrC,IAAI,QAAQ,EAAE;QACd,sBAAsB;QACtB,IAAI;YACA,MAAM,WAAW,MAAM,MACnB,CAAC,kDAAkD,EAAE,aAAa,CAAC;YAEvE,QAAQ,MAAM,SAAS;QAC3B,EAAE,OAAO,GAAG;YACR,QAAQ,IAAI;QAChB,SAAU;YACN,aAAa;QACjB;QACA,OAAO;IACX;IACA,SAAS,WAAW,KAAK;QACrB,UAAU,YAAY;QACtB,aAAa;QACb,IAAI,CAAC,MAAM,QACP,kBAAkB;QAEtB,MAAM,QAAQ,CAAC,IAAI;YACf,UAAU,YAAY,kBAAkB,KAAK,IAAI;QACrD;IACJ;IACA,SAAS;QACL,YAAY,iBAAiB,WAAW;QACxC,OAAO,iBAAiB,UAAU;IACtC;IAEA,SAAS,sBAAsB,CAAC;QAC5B,IAAI,MAAM,OAAO,SAAS;YACtB,MAAM,gBAAgB,IAAI,CAAC,MAAM,cAAc;YAC/C,WAAW;gBACP,WAAW;YACf,GAAE;QACN,OAAO,IAAI,MAAM,QAAQ,eAAe,IAAI,CAAC,MAAM,WAAS,GACxD,WAAW;IAEnB;IAEA,eAAe;QACX,QAAQ,MAAM,SAAS,OAAO,SAAS,cAAc,iBAAiB;QACtE,WAAW;IACf;IACA,SAAS,WAAW,aAAa;QAC7B,aAAa,YAAY;QACzB,aAAa;QACb,MAAM,eAAe,gBACf,MAAM,OAAO,CAAC,EAAE,KAAK,EAAE,GAAK,MAAM,cAAc,OAAO,SAAS,kBAChE;QACN,WAAW;YACP,WAAW;QACf,GAAE;IACN;IACA,SAAS,kBAAkB,GAAG,EAAE,KAAK;QACjC,MAAM,OAAO,SAAS,cAAc;QACpC,KAAK,UAAU,IAAI,mBAAmB,aAAa,QAAQ;QAC3D,KAAK,cAAc,CAAC,EAAE,MAAM,EAAE,GAAG,EAAE,MAAM,CAAC;QAC1C,OAAO;IACX;IACA,SAAS,kBAAmB,UAAU,EAAE;QACpC,aAAa,YAAY;IAC7B;IACA,SAAS,aAAc,QAAQ,KAAK;QAChC,IAAI,OAAO;YACP,YAAY,UAAU,OAAO;YAC7B,UAAU,UAAU,IAAI;QAC5B,OAAO;YACH,YAAY,UAAU,IAAI;YAC1B,UAAU,UAAU,OAAO;QAC/B;IACJ;AACJ","sources":["src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', init);\n\nasync function init(){\n    const select = document.querySelector('#countOfPosts');\n    let countOfPostsRequest =  Number(select.value);\n    const searchInput = document.querySelector('#search');\n    const searchStatus = document.querySelector(\".search_status\");\n    const progressBar = document.querySelector(\".progress\");\n    const postsList = document.querySelector(\"#posts\");\n\n\n    showProgress(true);\n    let posts = await getPosts(countOfPostsRequest);\n    renderPost(posts);\n    attachEvents();\n    async function getPosts(countOfPosts = 10) {\n        let posts = [];\n        // showProgress(true);\n        try {\n            const response = await fetch(\n                `https://jsonplaceholder.typicode.com/posts?_limit=${countOfPosts}`\n            );\n            posts = await response.json();\n        } catch (e) {\n            console.log('Error');\n        } finally {\n            showProgress(false);\n        }\n        return posts;\n    }\n    function renderPost(posts) {\n        postsList.innerHTML = null;\n        showProgress(false);\n        if (!posts.length) {\n            searchResultEmpty('Совпадений не найдено!');\n        }\n        posts.forEach((el, idx) => {\n            postsList.appendChild(createPostElement(idx, el?.title));\n        });\n    }\n    function attachEvents(){\n        searchInput.addEventListener('keydown', startSearchByKeypress);\n        select.addEventListener('change', reload);\n    }\n\n    function startSearchByKeypress(e) {\n        if (event.key == \"Enter\") {\n            const searchRequest = this.value.toLowerCase().trim();\n            setTimeout(()=>{\n                searchPost(searchRequest);\n            },500)\n        } else if (event.key === \"Backspace\" && this.value.length===1){\n            renderPost(posts);\n        }\n    }\n\n    async function reload () {\n        posts = await getPosts(Number(document.querySelector('#countOfPosts').value));\n        renderPost(posts);\n    }\n    function searchPost(searchRequest) {\n        searchStatus.innerHTML = null;\n        showProgress(true);\n        const searchResult = searchRequest\n            ? posts.filter(({ title }) => title.toLowerCase().trim().includes(searchRequest))\n            : posts;\n        setTimeout(()=> {\n            renderPost(searchResult);\n        },500);\n    }\n    function createPostElement(idx, title) {\n        const post = document.createElement('li');\n        post.classList.add('collection-item', 'hoverable', 'blue', 'lighten-5');\n        post.textContent = `${idx + 1} - ${title}`;\n        return post;\n    }\n    function searchResultEmpty (message = '') {\n        searchStatus.innerHTML = message;\n    }\n    function showProgress (state = false) {\n        if (state) {\n            progressBar.classList.remove(\"hide\");\n            postsList.classList.add(\"hide\");\n        } else {\n            progressBar.classList.add('hide');\n            postsList.classList.remove('hide');\n        }\n    }\n}"],"names":[],"version":3,"file":"index.de158e3a.js.map","sourceRoot":"/__parcel_source_root/"}